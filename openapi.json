{
  "openapi": "3.0.1",
  "info": {
    "title": "LabApiGateway",
    "version": "1.0.0",
    "description": "The entrypoint for all services created by the data science team."
  },
  "servers": [
    {
      "url": "https://brvw7rouq9.execute-api.eu-west-1.amazonaws.com/{basePath}",
      "description": "Staging server.",
      "variables": {
        "basePath": {
          "default": "dev"
        }
      }
    },
    {
      "url": "https://{lambda-url-id}.lambda-url.{region}.on.aws",
      "description": "AWS Lambda Function URL",
      "variables": {
        "lambda-url-id": {
          "default": "your-lambda-url-id"
        },
        "region": {
          "default": "eu-west-1"
        }
      }
    }
  ],
  "paths": {
    "/search/v1/indexing-status": {
      "get": {
        "parameters": [
          {
            "name": "node-uuids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-IntelligentSearch-IndexingStatusQueryingLa-smEFC4cQ1fgJ/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/searchIndexingStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/search/v1/search": {
      "post": {
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/searchQuery"
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-IntelligentSearch-IntelligentSearchLambda6-xs6XNxu80s5s/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/searchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/search/v1/search_and_summarize": {
      "post": {
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/searchQuery"
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-IntelligentSearch-IntelligentSearchLambda6-xs6XNxu80s5s/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/searchSummarizeResponse"
                }
              }
            }
          }
        }
      }
    },
    "/concept_tracks/v1/files/{file_id}/status": {
      "get": {
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "lab/2fc3f792-cd71-45c7-a8dd-bd23f4639319/Sun-Dog-Car-MIX_multiple_models"
          }
        ],
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-concept-tracks-concepttrackstatuslambdaB8F-6eywMtjkHcsX/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/conceptTracksIndexingStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/concept_tracks/v1/files/{file_id}/nodes": {
      "get": {
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "lab/2fc3f792-cd71-45c7-a8dd-bd23f4639319/Sun-Dog-Car-MIX_multiple_models"
          },
          {
            "name": "model_id",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "example": "522c5bce-ba13-432c-a429-6b4e99e14c81"
          }
        ],
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-concept-tracks-concepttracknodessuggestion-Szav0LwWyC0y/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/conceptTracksNodeSuggestionsResponse"
                },
                "examples": {
                  "node_suggestion_response": {
                    "value": {
                      "title": "sun dog",
                      "id": "e4cc04f3-f5ed-49f1-be63-482204f14180",
                      "pages": [
                        0
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/concept_tracks/v1/files/{file_id}/nodes/{node_id}": {
      "get": {
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "lab/2fc3f792-cd71-45c7-a8dd-bd23f4639319/Sun-Dog-Car-MIX_multiple_models"
          },
          {
            "name": "node_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "0ffa6f60-d8ea-48f7-a464-737c698609e7"
          },
          {
            "name": "model_id",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "example": "522c5bce-ba13-432c-a429-6b4e99e14c81"
          }
        ],
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-concept-tracks-concepttracknodesdetailslam-RJtYVfCrSm1V/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/conceptTracksNodeDetailsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/concept_tracks/v1/models": {
      "get": {
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-concept-tracks-concepttrackendpointslambda-y6iDgE074dpC/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/conceptTracksModelRequestResponse"
                },
                "examples": {
                  "models_response_with_default": {
                    "value": {
                      "id": "e4cc04f3-f5ed-49f1-be63-482204f14180",
                      "name": "LDA",
                      "description": "desc",
                      "default": true
                    }
                  },
                  "models_response_without_default": {
                    "value": {
                      "id": "fe111234-f5ed-49f1-be63-482204f14180",
                      "name": "Transformers",
                      "description": "desc"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/dcs/v1/suggestions": {
      "get": {
        "parameters": [
          {
            "name": "space_uuid",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "d22206af-46f6-4482-bb06-793428dcf3e4"
          }
        ],
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-DCSCdkStack-SuggestionsEndpointLambdaA39B8-iVeVBlyoptSJ/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/dcsSuggestionsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/pdf_2_text/v1/files/{file_id}/status": {
      "get": {
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "lab/2fc3f792-cd71-45c7-a8dd-bd23f4639319/Sun-Dog-Car-MIX_multiple_models"
          }
        ],
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-pdf-2-text-pdf2textstatuslambda187E8141-UvCepfawxNV8/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/pdf2TextIndexingStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/pdf_2_text/v1/files/bulk_status": {
      "post": {
        "summary": "Check the status of multiple PDF to text conversion jobs",
        "description": "This endpoint allows you to check the status of multiple file conversion jobs by providing their file IDs.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/pdf2TextBulkIndexingStatusRequest"
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-pdf-2-text-pdf2textstatusbulklambda4E4CC65-9gL4dUbyZbE2/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "Successfully retrieved the status of the files",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/pdf2TextBulkIndexingStatusResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/question_generation/v1": {
      "post": {
        "requestBody": {
          "description": "Endpoint for the openai based question generation service",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/questionGenerationQuery"
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-QGCdkStack-QuestionGenerationLambdaB5F6D33-ASsGg7bsslnl/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/questionGenerationResponseMultipleQuestions"
                    },
                    {
                      "$ref": "#/components/schemas/questionGenerationResponseMCQs"
                    }
                  ]
                },
                "examples": {
                  "mcq_response": {
                    "value": {
                      "questions": [
                        "Which theory did Darwin discover?",
                        "Which theory did Einstein discover?"
                      ],
                      "mcq_answers": [
                        [
                          "Evolution.",
                          "Evaluation.",
                          "Optimization.",
                          "Quantization."
                        ],
                        [
                          "Relativity",
                          "Relativism",
                          "Relevantism",
                          "Irrelevantism"
                        ]
                      ],
                      "correct_answers": [
                        "Evolution.",
                        "Relativity"
                      ],
                      "explanations": [
                        "Darwin uncovered the theory of evolution.",
                        "Einstein discovered relativity, both special and general."
                      ]
                    }
                  },
                  "non-mcq_response": {
                    "value": {
                      "questions": [
                        "What is a corpus?",
                        "How the corpus should be constructed?",
                        "What data is used to build the corpus?"
                      ],
                      "answers": [
                        "A corpus is a collection of linguistic data.",
                        "It should be constructed so as to be balanced and representative.",
                        "Linguistic data which was not originally produced for the process of linguistic analysis."
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/question_generation/v2": {
      "post": {
        "requestBody": {
          "description": "Endpoint for the claude based question generation service",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/questionGenerationQuery"
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-QGCdkStack-AnthropicQuestionGenerationLamb-R4hwRcLx6wKo/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/questionGenerationResponseMultipleQuestions"
                    },
                    {
                      "$ref": "#/components/schemas/questionGenerationResponseMCQs"
                    }
                  ]
                },
                "examples": {
                  "mcq_response": {
                    "value": {
                      "questions": [
                        "Which theory did Darwin discover?",
                        "Which theory did Einstein discover?"
                      ],
                      "mcq_answers": [
                        [
                          "Evolution.",
                          "Evaluation.",
                          "Optimization.",
                          "Quantization."
                        ],
                        [
                          "Relativity",
                          "Relativism",
                          "Relevantism",
                          "Irrelevantism"
                        ]
                      ],
                      "correct_answers": [
                        "Evolution.",
                        "Relativity"
                      ],
                      "explanations": [
                        "Darwin uncovered the theory of evolution.",
                        "Einstein discovered relativity, both special and general."
                      ]
                    }
                  },
                  "non-mcq_response": {
                    "value": {
                      "questions": [
                        "What is a corpus?",
                        "How the corpus should be constructed?",
                        "What data is used to build the corpus?"
                      ],
                      "answers": [
                        "A corpus is a collection of linguistic data.",
                        "It should be constructed so as to be balanced and representative.",
                        "Linguistic data which was not originally produced for the process of linguistic analysis."
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/freeform_grader/v1": {
      "post": {
        "requestBody": {
          "description": "Endpoint for grading freeform text answers to questions",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/freeformGraderQuery"
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-freeform-demo-freeformgraderfunction86C87A-a4e4fl0K9QnD/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/freeformGraderResponse"
                },
                "examples": {
                  "freeform_grader_response": {
                    "value": {
                      "score": 20,
                      "explanation": "Student got the answer pretty wrong."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/search_analytics/v1/search_analytics": {
      "post": {
        "requestBody": {
          "description": "Endpoint for getting data on recent searches by users",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/searchAnalyticsQuery"
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-freeform-demo-freeformgraderfunction86C87A-a4e4fl0K9QnD/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "summary": "Retrieve search analytics data",
        "responses": {
          "200": {
            "description": "A map of search analytics data keyed by UUID",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "$ref": "#/components/schemas/SearchAnalyticsData"
                  }
                },
                "examples": {
                  "example1": {
                    "value": {
                      "d0e74493-9d63-4de1-9deb-d8bba62a43c9": {
                        "query_volume_counts": [
                          {
                            "date": "10-26-2023",
                            "counts": 6
                          }
                        ],
                        "top_ten_queries": [
                          {
                            "query": "Structural ",
                            "count": 3
                          },
                          {
                            "query": "means hearing",
                            "count": 2
                          },
                          {
                            "query": "means",
                            "count": 1
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/node_summarizer/v1/summary": {
      "get": {
        "parameters": [
          {
            "name": "node_uuid",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "760c23a4-f84f-442e-ac13-03e72938c9db"
          }
        ],
        "security": [
          {
            "api_key": []
          }
        ],
        "x-amazon-apigateway-integration": {
          "type": "aws_proxy",
          "httpMethod": "POST",
          "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:666774207884:function:Staging-SummarizerCdkStac-LBSummarizerEndpointLamb-W9XQDu0kG6Xq/invocations",
          "passthroughBehavior": "when_no_match"
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NodeSummaryResponse"
                }
              }
            }
          }
        }
      }
    },
    "/": {
        "post": {
          "parameters": [
            {
              "name": "Authorization",
              "in": "headers",
              "required": true,
              "schema": {
                "type": "string"
              },
              "description": "jwt token for authentication"
            }
          ],
          "requestBody": {
          "description": "Streaming search summarizer lambda function url",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/searchQuery"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/streamingSearchSummarizeResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "searchIndexingStatusResponse": {
        "properties": {
          "<node-uuid1-val>": {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "enum": [
                  "not_found",
                  "in_progress",
                  "success",
                  "failed",
                  "removed"
                ]
              }
            }
          },
          "<node-uuidi-val>": {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "enum": [
                  "not_found",
                  "in_progress",
                  "success",
                  "failed",
                  "removed"
                ]
              }
            }
          }
        },
        "required": [
          "status"
        ],
        "example": {
          "97f922c5-9f04-4afa-92d6-65aa93fa58e7": {
            "status": "in_progress"
          },
          "1df80389-7d6b-43dd-bff7-c6ed5de4efde": {
            "status": "failed"
          }
        }
      },
      "searchQuery": {
        "type": "object",
        "properties": {
          "user": {
            "type": "string"
          },
          "organization": {
            "type": "string"
          },
          "knowledge_spaces": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "node_types": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "query": {
            "type": "string"
          },
          "page_number": {
            "type": "integer"
          }
        },
        "example": {
          "user": "a34516af-8888-0000-aa66-793428dcf3e4",
          "organization": "a5a946b7-2603-49a9-8f52-c730a7b56002",
          "knowledge_spaces": [
            "d22206af-46f6-4482-bb06-793428dcf3e4",
            "b4288731-f301-4778-ac81-bd21ce84bdf5"
          ],
          "node_types": [
            "document",
            "video"
          ],
          "query": "beef pieces",
          "page_number": 1
        }
      },
      "searchResultsResponse": {
        "type": "object",
        "properties": {
          "uuid": {
            "type": "string"
          },
          "node_uuid": {
            "type": "string"
          },
          "node_kind": {
            "type": "string"
          },
          "score": {
            "type": "number",
            "format": "float64"
          },
          "original_text": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "start": {
            "type": "integer",
            "format": "int64"
          },
          "end": {
            "type": "integer",
            "format": "int64"
          },
          "page": {
            "type": "integer",
            "format": "int64"
          },
          "coordinates": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            }
          },
          "href": {
            "type": "string"
          },
          "match": {
            "type": "string"
          }
        }
      },
      "searchResponse": {
        "type": "object",
        "properties": {
          "num_results": {
            "type": "integer",
            "format": "int64"
          },
          "exec_time": {
            "type": "number",
            "format": "float64"
          },
          "has_node_types": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "results": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/searchResultsResponse"
            }
          }
        },
        "example": {
          "query": "beef pieces",
          "num_results": 1,
          "exec_time": 3.69,
          "has_node_types": [
            "document",
            "video"
          ],
          "results": [
            {
              "uuid": "be07f02e-3f60-4d9e-b080-7dc9005afbd5",
              "node_uuid": "35d314c0-4542-4e72-939b-979ef07cb15f",
              "node_kind": "document",
              "space_uuid": "b4288731-f301-4778-ac81-bd21ce84bdf5",
              "score": 0.8899998,
              "original_text": "500g\t\r  of cheap beef pieces\t\r  (stewing\t\r  steak usually is cheap) ",
              "title": "Cooking with Ingredients",
              "start": null,
              "end": null,
              "page": 3,
              "coordinates": [
                [
                  72.12010192871094,
                  652.975341796875,
                  404.9890594482422,
                  669.2617340087891
                ]
              ],
              "href": null,
              "match": "High"
            }
          ]
        }
      },
      "referencesResult": {
        "type": "object",
        "properties": {
          "Reference number": {
            "type": "string"
          },
          "Node uuid": {
            "type": "string"
          }
        }
      },
      "searchSummarizeResponse": {
        "type": "object",
        "properties": {
          "summary": {
            "type": "string"
          },
          "returned_results": {
            "type": "string"
          },
          "references": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/referencesResult"
            }
          }
        },
        "example": {
          "summary": "I am a summary of some results",
          "returned_results": "These are some returned results",
          "references": [
            [
              {
                "Reference number": 1
              },
              {
                "Node uuid": 1234
              }
            ]
          ]
        }
      },
      "streamingSearchSummarizeResponse": {
        "type": "object",
        "properties": {
          "v2_results": {
            "type": "json",
            "items": {
              "$ref": "#/components/schemas/searchResponse"
            }
          },
          "summary": {
            "type": "string"
          }
        },
        "example": "{\"v2_results\": {\"user\": \"a34516af-8888-0000-aa66-793428dcf3e4\", \"organization\": \"a5a946b7-2603-49a9-8f52-c730a7b56002\", \"knowledge_spaces\": [\"d22206af-46f6-4482-bb06-793428dcf3e4\", \"b4288731-f301-4778-ac81-bd21ce84bdf5\"], \"node_types\": [\"document\", \"video\"], \"query\": \"beef pieces\", \"page_number\": 1}}\nI am a summary of some results"
      },
      "conceptTracksIndexingStatusResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "in_progress",
              "success",
              "failed"
            ]
          }
        },
        "required": [
          "status"
        ],
        "example": {
          "status": "in_progress"
        }
      },
      "conceptTracksNodeDetail": {
        "type": "object",
        "properties": {
          "node_title": {
            "type": "string"
          },
          "keywords": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "coordinates": {
            "type": "array",
            "items": {
              "type": "array",
              "items": {
                "type": "integer"
              }
            }
          }
        },
        "example": {
          "node_title": "This is a node",
          "keywords": [
            "keyword1",
            "keyword2"
          ],
          "coordinates": [
            [
              1,
              2,
              3,
              4
            ],
            [
              5,
              6,
              7,
              8
            ]
          ]
        }
      },
      "conceptTracksNodeSuggestion": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "pages": {
            "type": "array",
            "items": {
              "oneOf": [
                {
                  "type": "integer"
                },
                {
                  "$ref": "#/components/schemas/conceptTracksNodeDetail"
                }
              ]
            }
          }
        },
        "example": {
          "title": "Sun dog",
          "id": "e4cc04f3-f5ed-49f1-be63-482204f14180",
          "pages": [
            0
          ]
        }
      },
      "conceptTracksNodeSuggestionsResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/conceptTracksNodeSuggestion"
        }
      },
      "conceptTracksNodeDetailsResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          }
        },
        "required": [
          "status"
        ],
        "example": {
          "status": "in_progress"
        }
      },
      "conceptTracksModelRequestResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          }
        },
        "required": [
          "status"
        ],
        "example": {
          "status": "in_progress"
        }
      },
      "dcsSuggestionsResponse": {
        "type": "object",
        "properties": {
          "space_uuid": {
            "type": "string"
          },
          "last_refreshed_at": {
            "type": "string"
          },
          "suggestions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "suggested_node_uuid": {
                  "type": "string"
                },
                "score": {
                  "type": "number"
                },
                "from_space_uuid": {
                  "type": "string"
                },
                "last_updated_at": {
                  "type": "string"
                }
              }
            }
          }
        },
        "example": {
          "space_uuid": "d22206af-46f6-4482-bb06-793428dcf3e4",
          "last_refreshed_at": "October 24, 2023, 03:16 PM",
          "suggestions": [
            {
              "suggested_node_uuid": "cd2206af-46f6-4482-bb06-793428dcf3e4",
              "score": 1,
              "from_space_uuid": "ab2206af-46f6-4482-bb06-793428dcf3e4",
              "last_updated_at": "October 24, 2023, 03:16 PM"
            }
          ]
        }
      },
      "pdf2TextIndexingStatusResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "in_progress",
              "success",
              "failed"
            ]
          }
        },
        "required": [
          "status"
        ],
        "example": {
          "status": "in_progress"
        }
      },
      "pdf2TextBulkIndexingStatusRequest": {
        "type": "object",
        "properties": {
          "file_ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "example": {
          "file_ids": [
            "lab/0b37cc06-e72f-40e3-a5db-a0861142b134/Electric fields",
            "msg-sum23/c2e7082f-40d3-484d-9e1c-f25d4d5534f1/Speech_audio_quality_test-o8dEgTMZ81g-2min-__*!_____.mp3.transcript"
          ]
        }
      },
      "pdf2TextBulkIndexingStatusResponse": {
        "type": "object",
        "properties": {
          "result": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          }
        },
        "example": {
          "result": {
            "file_id_1": "completed",
            "file_id_2": "in_progress"
          }
        }
      },
      "questionGenerationQuery": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string"
          },
          "request_type": {
            "type": "string",
            "enum": [
              "multiple_questions",
              "fill_in_blanks",
              "mcq"
            ]
          },
          "previous_question": {
            "type": "string"
          }
        },
        "required": [
          "text",
          "request_type"
        ],
        "example": {
          "text": "The North East Line is a high-capacity Mass Rapid Transit (MRT) line in Singapore. Operated by SBS Transit, the 20-kilometre (12 mi) line runs from HarbourFront station in southern Singapore to Punggol station in the northeast via Chinatown, Little India, Serangoon and Hougang. Completed at a cost of S$5 billion, the line began operating 14 of its 16 stations on 20 June 2003.",
          "request_type": "mcq"
        }
      },
      "questionGenerationResponseMultipleQuestions": {
        "type": "object",
        "properties": {
          "questions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "answers": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "questions",
          "answers"
        ],
        "example": {
          "questions": [
            "What is a corpus?",
            "How the corpus should be constructed?",
            "What data is used to build the corpus?"
          ],
          "answers": [
            "A corpus is a collection of linguistic data.",
            "It should be constructed so as to be balanced and representative.",
            "Linguistic data which was not originally produced for the process of linguistic analysis."
          ]
        }
      },
      "questionGenerationResponseMCQs": {
        "type": "object",
        "properties": {
          "questions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "mcq_answers": {
            "type": "array",
            "items": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "correct_answers": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "explanations": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "questions",
          "mcq_answers",
          "correct_answers",
          "explanations"
        ],
        "example": {
          "questions": [
            "Which theory did Darwin discover?",
            "Which theory did Einstein discover?"
          ],
          "mcq_answers": [
            [
              "Evolution.",
              "Evaluation.",
              "Optimization.",
              "Quantization."
            ],
            [
              "Relativity",
              "Relativism",
              "Relevantism",
              "Irrelevantism"
            ]
          ],
          "correct_answers": [
            "Evolution.",
            "Relativity"
          ],
          "explanations": [
            "Darwin uncovered the theory of evolution.",
            "Einstein discovered relativity, both special and general."
          ]
        }
      },
      "freeformGraderQuery": {
        "type": "object",
        "properties": {
          "question": {
            "type": "string"
          },
          "student_answer": {
            "type": "string"
          },
          "model_answer": {
            "type": "string"
          }
        },
        "required": [
          "question",
          "student_answer",
          "model_answer"
        ],
        "example": {
          "question": "What is a cryptocurrency?",
          "student_answer": "Cryptocurrency is a physical coin minted by governments, based on the gold standard, which needs a centralized bank for all transactions and validations.",
          "model_answer": "Cryptocurrency is a digital or virtual currency that uses cryptography for security and operates on a decentralized platform, typically based on blockchain technology."
        }
      },
      "freeformGraderResponse": {
        "type": "object",
        "properties": {
          "score": {
            "type": "integer"
          },
          "explanation": {
            "type": "string"
          }
        },
        "required": [
          "score",
          "explanation"
        ],
        "example": {
          "score": 80,
          "explanation": "student got the answer roughly right."
        }
      },
      "searchAnalyticsQuery": {
        "type": "object",
        "properties": {
          "org_id": {
            "type": "string"
          },
          "user_ids": {
            "items": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "start_date": {
            "type": "string"
          },
          "end_date": {
            "type": "string"
          }
        },
        "required": [
          "user_ids",
          "date_range"
        ],
        "example": {
          "org_id": "7c646fda-809f-424b-8a45-66fbbb30e904",
          "user_ids": [
            "1c92462f-37fa-4114-8698-d1b11a661dcd"
          ],
          "start_date": "10-10-2023",
          "end_date": "10-17-2023"
        }
      },
      "SearchAnalyticsData": {
        "type": "object",
        "properties": {
          "query_volume_counts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/QueryVolumeCount"
            }
          },
          "top_ten_queries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TopQuery"
            }
          }
        },
        "required": [
          "query_volume_counts",
          "top_ten_queries"
        ]
      },
      "QueryVolumeCount": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "format": "mm-dd-yyyy"
          },
          "counts": {
            "type": "integer"
          }
        },
        "required": [
          "date",
          "counts"
        ]
      },
      "TopQuery": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string"
          },
          "count": {
            "type": "integer"
          }
        },
        "required": [
          "query",
          "count"
        ]
      },
      "NodeSummaryResponse": {
        "type": "object",
        "properties": {
          "node_uuid": {
            "type": "string"
          },
          "summary": {
            "type": "string"
          }
        },
        "example": {
          "node_uuid": "3271f11a-1ea5-4f9e-a286-44efab57b4af",
          "summary": "The document discusses the composition of the Sun. Key points:\n\n1. The Sun is composed primarily of hydrogen (74.9%) and helium (23.8%). Heavier elements (\"metals\") make up less than 2%. \n\n2. The hydrogen and helium were produced in the first 20 minutes after the Big Bang. Heavier elements were produced by previous generations of stars and spread through supernovae explosions.\n\n3. Originally the Sun had 71.1% hydrogen, 27.4% helium, 1.5% heavier elements. Gravity caused heavier elements to settle towards the core over time.\n\n4. In the core, hydrogen fused into helium over billions of years. The core now has ~60% helium. An inner helium core is starting to form.\n\n5. In 5 billion years helium buildup will cause the Sun to become a red giant when it exits the main sequence.\n\n6. The composition of the Sun's photosphere is considered representative of the primordial solar system composition. It's measured by spectroscopy of the photosphere and meteorites.\n"
        }
      }
    },
    "securitySchemes": {
      "api_key": {
        "type": "apiKey",
        "name": "x-api-key",
        "in": "header"
      }
    }
  }
}
